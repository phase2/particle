{#
/**
 * @file
 * Theme override for displaying a view as a table.
 *
 * Available variables:
 * - attributes: Remaining HTML attributes for the element.
 *   - class: HTML classes that can be used to style contextually through CSS.
 * - title : The title of this group of rows.
 * - header: The table header columns.
 *   - attributes: Remaining HTML attributes for the element.
 *   - content: HTML classes to apply to each header cell, indexed by
 *   the header's key.
 *   - default_classes: A flag indicating whether default classes should be
 *     used.
 * - caption_needed: Is the caption tag needed.
 * - caption: The caption for this table.
 * - accessibility_description: Extended description for the table details.
 * - accessibility_summary: Summary for the table details.
 * - rows: Table row items. Rows are keyed by row number.
 *   - attributes: HTML classes to apply to each row.
 *   - columns: Row column items. Columns are keyed by column number.
 *     - attributes: HTML classes to apply to each column.
 *     - content: The column content.
 *   - default_classes: A flag indicating whether default classes should be
 *     used.
 * - responsive: A flag indicating whether table is responsive.
 * - sticky: A flag indicating whether table header is sticky.
 *
 * @see template_preprocess_views_view_table()
 */
#}
{%
  set classes = [
    'border-collapse',
    'w-full',
  ]
%}
        <table{{ attributes.addClass(classes) }}>
          {% if caption_needed %}
            <caption>
            {% if caption %}
              {{ caption }}
            {% else %}
              {{ title }}
            {% endif %}
            {% if (summary is not empty) or (description is not empty) %}
              <details>
                {% if summary is not empty %}
                  <summary>{{ summary }}</summary>
                {% endif %}
                {% if description is not empty %}
                  {{ description }}
                {% endif %}
              </details>
            {% endif %}
            </caption>
          {% endif %}
          {% if header %}
            <thead>
              <tr>
                {% for key, column in header %}
                  {% if column.default_classes %}
                    {%
                      set column_classes = [
                        'p-3', 
                        'font-bold',
                        'uppercase',
                        'bg-utc-new-blue-100',
                        'text-utc-new-blue-500',
                        'border-0',
                        'hidden',
                        'xl:table-cell'
                      ]
                    %}
                  {% endif %}
                  <th{{ column.attributes.addClass(column_classes).setAttribute('scope', 'col') }}>
                    {%- if column.wrapper_element -%}
                      <{{ column.wrapper_element }}>
                        {%- if column.url -%}
                          <a href="{{ column.url }}" title="{{ column.title }}">{{ column.content }}{{ column.sort_indicator }}</a>
                        {%- else -%}
                          {{ column.content }}{{ column.sort_indicator }}
                        {%- endif -%}
                      </{{ column.wrapper_element }}>
                    {%- else -%}
                      {%- if column.url -%}
                        <a href="{{ column.url }}" title="{{ column.title }}">{{ column.content }}{{ column.sort_indicator }}</a>
                      {%- else -%}
                        {{- column.content }}{{ column.sort_indicator }}
                      {%- endif -%}
                    {%- endif -%}
                  </th>
                {% endfor %}
              </tr>
            </thead>
          {% endif %}
          <tbody>
          {%
                      set row_classes = [
                        'bg-white',
                        'xl:hover:bg-gray-100',
                        'font-medium',
                        'flex',
                        'xl:table-row',
                        'flex-row',
                        'xl:flex-row',
                        'flex-wrap',
                        'xl:flex-no-wrap',
                        'mb-5', 
                        'xl:mb-0',
                        'shadow-lg'
                      ]
                    %}
            {% for row in rows %}
              <tr{{ row.attributes.addClass(row_classes) }}>
                {% for key, column in row.columns %}
                  {% if column.default_classes %}
                    {%
                      set column_classes = [
                          'xl:w-auto',
                          'xl:my-3',
                          'text-gray-800',
                          'xl:border-l-0',
                          'xl:border-r-0',
                          'xl:border-b',
                          'block',
                          'xl:table-cell',
                          'text-sm',
                          'my-5'
                      ]
                    %}
                    {% for field in column.fields %}
                      {% set column_classes = column_classes|merge(['views-' ~ field]) %}
                    {% endfor %}
                  {% endif %}
                  {% if loop.first %}
                    {%
                      set column_classes = [
                          'w-full',
                          'bg-utc-new-blue-100',
                          'font-semibold',
                          'xl:bg-white',
                          'xl:w-auto',
                          'p-3',
                          'text-gray-800',
                          'xl:border-l-0',
                          'xl:border-r-0',
                          'xl:border-b',
                          'block',
                          'xl:table-cell',
                          'text-sm'
                      ]
                    %}
                  {% endif %}
                  <td{{ column.attributes.addClass(column_classes) }}>
                    {%- if column.wrapper_element -%}
                      <{{ column.wrapper_element }}>
                      {% for content in column.content %}
                        {{ content.separator }}{{ content.field_output }}
                      {% endfor %}
                      </{{ column.wrapper_element }}>
                    {%- else -%}
                      {% for content in column.content %}
                        {{- content.separator }}{{ content.field_output -}}
                      {% endfor %}
                    {%- endif %}
                  </td>
                {% endfor %}
              </tr>
            {% endfor %}
          </tbody>
        </table>
